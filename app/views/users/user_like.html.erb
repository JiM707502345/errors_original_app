<%= render "shared/header" %>

<%#= メイン画面 %>
<div class="wrapper">
  <div class="side-bar">
    <%= render "shared/side-bar" %>
  </div>

     <!--ユーザー詳細画面-->
        <div class="user-show">
          <div class="user-wrapper">
            <table class="table">
            <tbody>
            <tr>
              <th class="table__col1">名前</th>
              <td class="table__col2"><%= "：#{current_user.name}" %></td>
            </tr>
            <tr>
              <th class="table__col1">年齢</th>
              <td class="table__col2"><%= "：#{current_user.age}" %></td>
            </tr>
            <tr>
              <th class="table__col1">性別</th>
              <td class="table__col2"><%= "：#{current_user.gender.name}" %></td>
            </tr>
            </tbody>
            </table>
         </div>

        <%#=自身の投稿一覧といいねした投稿一覧の切り替え%>
        <div class="user-path">
          <div class="path-fonts">
          <%= link_to 'Errors', user_path(current_user.id), method: :get, class:"change-page-like-errors" %>
          <%= link_to 'Likes', user_like_users_path, method: :get, class:"change-page-like-likes" %>
          </div>
        </div>

        <%#=自身の投稿一覧%>
        <% if current_user.liked_errors.blank? %>
          <div class="not-errors">
            <%= image_tag("errorlogo2.jpg", class: "not-errors-logo") %><br>
            <p class="not-errors-message"><%= "※まだいいねした投稿がありません。"%></p>
          </div>
        <% else %>
        <div class="error-contents">
          <% current_user.liked_errors.each do |error| %>
          <ul class="error-lists">
            <li class="error-user-name">
           <% if user_signed_in? && current_user.id == error.user_id %>
              <div class="more">
              <span class="three-dots"><%= "…" %></span>
           <ul class="more_list">
            <li>
            <%= link_to '編集', edit_error_path(error.id), method: :get, class:"more-list-btn" %>
            </li>
            <li>
            <%= link_to '削除', error_path(error.id), method: :delete, class:"more-list-btn" %>
            </li>
          </ul>
        </div>
        <% end %>
        <li>
        <%= link_to error.user.name, "#", mthod: :get, class:"error-user-name-link" %>
        </li>
        <li class="error-list">
        <p class="error-error">
          <%= link_to error.try, error_path(error.id), method: :get, class:"go-show-path" %>
        </p>
        </li>
        <li class="error-list">
        <p class="error-error">
          <%= link_to "&", error_path(error.id), method: :get, class:"and-go-show-path" %>
        </p>
        </li>
       <li class="error-list">
        <p class="error-error">
          <%= link_to error.error, error_path(error.id), method: :get, class:"go-show-path" %>
        </p>
      </li>

      <%#いいね%>
      <div class="like-link" id="like-link-<%= error.id %>">
        <% if current_user.likes.find_by(error_id: error.id) %>
          <%= link_to unlike_path(error.id), method: :delete, remote: true do %>
            <div class = "iine__button">♥<%= error.likes.count %></div>
          <% end %>
        <% else %>
          <%= link_to like_path(error.id), method: :post, remote: true do %>
            <div class = "iine__button">♡<%= error.likes.count %></div>
          <% end %>
        <% end %>
      </div>
      <%#いいね%>

      </ul>
       <% end %>
      <% end %>
  </div>
</div>
<%#= メイン画面 %>